# 2020年10月

## 2020/10/05

* 阅读文献 Neural networks in time-optimal low-thrust interplanetary transfers 结合海洋师兄博士论文

    主要内容：训练神经网络作为预测器和控制器，学习小推力时间最优转移问题的最优转移时间、协态初值、最优控制律。

* 阅读文献 Interplanetary transfers via deep representations of the optimal policy and/or of the value function

    主要内容：

    1. 生成数据集，通过一条轨迹附近添加摄动，直接获取满足最优性的数据集，不需要反复求解最优控制问题。

    2. 根据HJB方程，用于预测优化指标的神经网络进行求导也可以计算最优控制律，但需要在loss函数中添加惩罚项，才可以达到较高的精度。

    但是文中没有提到如何根据神经网络计算优化指标对于当前状态的导数。

* 一些感受

    机器学习的目的在于预测未知，这两篇文章都在针对某一特定问题进行求解，生成数据集，然后进行训练，最终说明可以用神经网络来学习输入和输出之间的关系，但是**这一关系仍然只针对这一问题**，如地球转移到与火星交会时间最优、地球转移到金星轨道燃料最优。

    数据集包含的范围应该更加广泛，类似于海洋师兄Deep Networks那篇文章，初始质量、初始状态、末端状态都作为输入，并且在一个范围内变化，才能够用于**多目标问题的全局优化**中。

    只针对单一问题的神经网络训练**状态变量-控制变量对**，可能适合应用到具体某一任务的**实时最优控制**上，如着陆问题。

## 2020/10/06

* 高等动力学

    复习广义能量积分、广义动量积分、第一类拉格朗日方程。

    作业

    上课

* 阅读文献 Automated solution of the low-thrust interplanetary trajectory problem

    主要内容：采用双层循环算法，外层采用null-gene technique+GA选择访问序列和引力辅助序列，内层用MBH+NLP直接法优化时间节点和控制律

    内层循环每次都采用直接法进行计算，没有实现进行筛选或给出较好的初值，需要花费非常多的时间。

## 2020/10/07

* 上课 航天动力学

* 生成GTOC7小推力时间最优数据集，搭建神经网络进行训练

    共生成100000条数据，80000用作训练集，10000用作验证集，10000用作测试集。

    输入量为：出发天体的经典轨道根数6个；目标天体的经典轨道根数6个；初始质量1个

    输出量为：最优转移时间1个

    目前训练结果平均相对误差可以达到4%

    可以改变的地方：真实天体/虚拟天体生成数据集；增加/改变输入量

## 2020/10/08

* 神经网络训练

    激活函数采用Sigmoid效果很差。

    下一步需要进行超参数的搜索

* 批改航天动力学作业

## 2020/10/09

* 讨论班 陈诗雨/鄂智博

* 神经网络超参数调节

    超参数搜索：batch_size num_layers num_neurons

    采用不同的激活函数

    自适应学习率

## 2020/10/10

* 机器学习

    请教程林师兄，C++如何调用python训练好的神经网络？网络上的方法比较繁琐，计划是**将神经网络中的参数输出，然后在C++中手动搭建网络，并实现ReLU激活函数**。

    目前平均相对误差可以达到2%左右，但对于单条数据的最大误差超过400%。

    如何提高预测精度？检查生成数据集时的程序有没有问题、继续扩大神经网络的规模、扩大超参数搜索的范围。

    将初始学习率加入到超参数随机搜索中去。

* 应用训练好的神经网络求解序列优化问题

    读取GTOC7小行星数据、神经网络模型数据

    C++通过神经网络模型进行运算，估计最优时间，估计结果与python估计结果不同，程序中可能存在问题，目前已修改正确。

* 观察相对误差的分布情况

    大部分都集中在很小的范围内，有一些误差较大，后续需要更详细的观察。